!function(t){window.InlineShortcodeView_vc_tta_accordion=window.InlineShortcodeViewContainer.extend({events:{},childTag:"vc_tta_section",activeClass:"vc_active",defaultSectionTitle:window.i18nLocale.section,initialize:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.initialize.call(this)},render:function(){return window.InlineShortcodeViewContainer.__super__.render.call(this),_.bindAll(this,"buildSortable","updateSorting"),this.content(),this.buildPagination(),this},addControls:function(){return this.$controls=t('<div class="no-controls"></div>'),this.$controls.appendTo(this.$el),this},addElement:function(e){e&&e.preventDefault(),this.addSection("parent.prepend"===t(e.currentTarget).data("vcControl"))},appendElement:function(t){return this.addElement(t)},prependElement:function(t){return this.addElement(t)},addSection:function(t){var e,i,n;for(i={shortcode:e=this.childTag,parent_id:this.model.get("id"),isActiveSection:!0,params:{title:this.defaultSectionTitle}},t&&(vc.activity="prepend",i.order=this.getSiblingsFirstPositionIndex()),vc.builder.create(i),n=vc.builder.models.length-1;n>=0;n--)e=vc.builder.models[n].get("shortcode"),void 0!==window.vc_settings_presets[e]&&(vc.builder.models[n].attributes.params=_.extend(vc.builder.models[n].attributes.params,window.vc_settings_presets[e]),"vc_tta_section"===e&&void 0!==vc.builder.models[n].attributes.params.tab_id&&(vc.builder.models[n].attributes.params.tab_id=vc_guid()+"-cl"));vc.builder.render()},getSiblingsFirstPositionIndex:function(){var t,e;return t=0,(e=vc.shortcodes.sort().findWhere({parent_id:this.model.get("id")}))&&(t=e.get("order")-1),t},changed:function(){vc.frame_window.vc_iframe.buildTTA(),window.InlineShortcodeView_vc_tta_accordion.__super__.changed.call(this),_.defer(this.buildSortable),this.buildPagination()},updated:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.updated.call(this),_.defer(this.buildSortable),this.buildPagination()},buildSortable:function(){this.$el&&this.$el.find(".vc_tta-panels").sortable({forcePlaceholderSize:!0,placeholder:"vc_placeholder-row",start:this.startSorting,over:function(t,e){e.placeholder.css({maxWidth:e.placeholder.parent().width()}),e.placeholder.removeClass("vc_hidden-placeholder")},items:"> .vc_element",handle:".vc_tta-panel-heading, .vc_child-element-move",update:this.updateSorting})},startSorting:function(t,e){e.placeholder.width(e.item.width())},updateSorting:function(e,i){var n=this;this.getPanelsList().find("> .vc_element").each(function(){var e,i;e=(i=t(this)).data("modelId"),vc.shortcodes.get(e).save({order:n.getIndex(i)},{silent:!0})}),this.buildPagination()},getIndex:function(t){return t.index()},getPanelsList:function(){return this.$el.find(".vc_tta-panels")},parentChanged:function(){window.InlineShortcodeView_vc_tta_accordion.__super__.parentChanged.call(this),void 0!==vc.frame_window.vc_round_charts&&vc.frame_window.vc_round_charts(this.model.get("id")),void 0!==vc.frame_window.vc_line_charts&&vc.frame_window.vc_line_charts(this.model.get("id"))},buildPagination:function(){},removePagination:function(){this.$el.find(".vc_tta-panels-container").find(" > .vc_pagination").remove()},getPaginationList:function(){var e,i,n,a,o,d;return d=this.model.get("params"),!_.isUndefined(d.pagination_style)&&d.pagination_style.length?(e=this.$el.find("[data-vc-accordion]"),(i=[]).push("vc_general"),i.push("vc_pagination"),n=d.pagination_style.split("-"),i.push("vc_pagination-style-"+n[0]),i.push("vc_pagination-shape-"+n[1]),!_.isUndefined(d.pagination_color)&&d.pagination_color.length&&i.push("vc_pagination-color-"+d.pagination_color),(o=[]).push('<ul class="'+i.join(" ")+'">'),a=this,e.each(function(){var e,i,n,d;e=["vc_pagination-item"],(i=t(this)).closest(".vc_tta-panel").hasClass(a.activeClass)&&e.push(a.activeClass),0!==(n=i.attr("href")).indexOf("#")&&(n=""),i.attr("data-vc-target")&&(n=i.attr("data-vc-target")),d='<a href="javascript:;" data-vc-target="'+n+'" class="vc_pagination-trigger" data-vc-tabs data-vc-container=".vc_tta"></a>',o.push('<li class="'+e.join(" ")+'" data-vc-tab>'+d+"</li>")}),o.push("</ul>"),t(o.join(""))):null}})}(window.jQuery);