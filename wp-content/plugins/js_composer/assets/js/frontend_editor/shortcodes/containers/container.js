!function(e){vc.events.on("shortcodeView:updated",function(e){var t;!0===(vc.map[e.get("shortcode")]||!1).is_container&&(t=e.get("id"),vc.frame_window.vc_iframe.updateChildGrids(t))}),window.InlineShortcodeViewContainer=window.InlineShortcodeView.extend({controls_selector:"#vc_controls-template-container",events:{"click > .vc_controls .vc_element .vc_control-btn-delete":"destroy","click > .vc_controls .vc_element .vc_control-btn-edit":"edit","click > .vc_controls .vc_element .vc_control-btn-clone":"clone","click > .vc_controls .vc_element .vc_control-btn-prepend":"prependElement","click > .vc_controls .vc_control-btn-append":"appendElement","click > .vc_empty-element":"appendElement",mouseenter:"resetActive",mouseleave:"holdActive"},hold_active:!1,parent_view:!1,initialize:function(e){_.bindAll(this,"holdActive"),window.InlineShortcodeViewContainer.__super__.initialize.call(this,e),this.model.get("parent_id")&&(this.parent_view=vc.shortcodes.get(this.model.get("parent_id")).view)},resetActive:function(e){this.hold_active&&window.clearTimeout(this.hold_active)},holdActive:function(e){this.resetActive(),this.$el.addClass("vc_hold-active");var t=this;this.hold_active=window.setTimeout(function(){t.hold_active&&window.clearTimeout(t.hold_active),t.hold_active=!1,t.$el.removeClass("vc_hold-active")},700)},content:function(){return!1===this.$content&&(this.$content=this.$el.find(".vc_container-anchor:first").parent(),this.$el.find(".vc_container-anchor:first").remove()),this.$content},render:function(){return window.InlineShortcodeViewContainer.__super__.render.call(this),this.content().addClass("vc_element-container"),this.$el.addClass("vc_container-block"),this},changed:function(){this.allowAddControlOnEmpty()&&(0===this.$el.find(".vc_element[data-tag]").length&&this.$el.addClass("vc_empty").find("> :first").addClass("vc_empty-element")||this.$el.removeClass("vc_empty").find("> .vc_empty-element").removeClass("vc_empty-element"))},prependElement:function(e){_.isObject(e)&&e.preventDefault(),this.prepend=!0,vc.add_element_block_view.render(this.model,!0)},appendElement:function(e){_.isObject(e)&&e.preventDefault(),vc.add_element_block_view.render(this.model)},addControls:function(){var t,n,c,o,i,l,s,d,r;t=this.model.get("shortcode"),s=e(this.controls_selector).html();var a;(d=vc.shortcodes.get(this.model.get("parent_id")))&&(a=vc.getMapped(d.get("shortcode")).name,n=d.get("shortcode")),c=vc_user_access().shortcodeAll(t),o=vc_user_access().shortcodeEdit(t),i=vc_user_access().shortcodeAll(n),l=vc_user_access().shortcodeEdit(n),r={name:vc.getMapped(t).name,tag:t,parent_name:a,parent_tag:n,can_edit:o,can_all:c,parent_can_edit:l,parent_can_all:i,state:vc_user_access().getState("shortcodes"),allowAdd:this.allowAddControl(),switcherPrefix:i&&c?"":"-disable-switcher"};var v=vc.template(s,_.extend({},vc.templateOptions.custom,{evaluate:/\{#([\s\S]+?)#}/g}));this.$controls=e(v(r).trim()).addClass("vc_controls"),this.$controls.appendTo(this.$el)},allowAddControl:function(){return"edit"!==vc_user_access().getState("shortcodes")},multi_edit:function(e){var t,n,c=[];_.isObject(e)&&e.preventDefault(),this.model.get("parent_id")&&(t=vc.shortcodes.get(this.model.get("parent_id"))),t?(c.push(t),n=vc.shortcodes.where({parent_id:t.get("id")}),vc.multi_edit_element_block_view.render(c.concat(n),this.model.get("id"))):vc.edit_element_block_view.render(this.model)},allowAddControlOnEmpty:function(){return"edit"!==vc_user_access().getState("shortcodes")}})}(window.jQuery);