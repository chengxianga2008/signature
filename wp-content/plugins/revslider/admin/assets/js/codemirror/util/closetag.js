!function(){function e(e,t){return CodeMirror.innerMode(e.getMode(),t).state}function t(e,t,r,o){n(e,t,o)?(e.replaceSelection("\n\n</"+o+">","end"),e.indentLine(r.line+1),e.indentLine(r.line+2),e.setCursor({line:r.line+1,ch:e.getLine(r.line+1).length})):(e.replaceSelection("</"+o+">"),e.setCursor(r))}function n(e,t,n){return void 0!==t&&null!=t&&1!=t||(t=e.getOption("closeTagIndent")),t||(t=[]),-1!=o(t,n.toLowerCase())}function r(e,t,n){return"xml"==e.getOption("mode")||(void 0!==t&&null!=t||(t=e.getOption("closeTagVoid")),t||(t=[]),-1==o(t,n.toLowerCase()))}function o(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function i(e,t,n){e.replaceSelection("/"+n+">"),e.setCursor({line:t.line,ch:t.ch+n.length+2})}CodeMirror.defaults.closeTagEnabled=!0,CodeMirror.defaults.closeTagIndent=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"],CodeMirror.defaults.closeTagVoid=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],CodeMirror.defineExtension("closeTag",function(n,o,l,a){if(!n.getOption("closeTagEnabled"))throw CodeMirror.Pass;var s=n.getCursor(),c=n.getTokenAt(s),d=e(n,c.state);if(d)if(">"==o){if(g=d.type,"tag"==c.className&&"closeTag"==g)throw CodeMirror.Pass;if(n.replaceSelection(">"),s={line:s.line,ch:s.ch+1},n.setCursor(s),c=n.getTokenAt(n.getCursor()),!(d=e(n,c.state)))throw CodeMirror.Pass;var g=d.type;if("tag"==c.className&&"selfcloseTag"!=g)return void((f=d.tagName).length>0&&r(n,a,f)&&t(n,l,s,f));n.setSelection({line:s.line,ch:s.ch-1},s),n.replaceSelection("")}else if("/"==o&&"tag"==c.className&&"<"==c.string){var u=d.context,f=u?u.tagName:"";if(f.length>0)return void i(n,s,f)}throw CodeMirror.Pass})}();